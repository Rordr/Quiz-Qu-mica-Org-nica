<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz de Qu√≠mica Org√¢nica</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f0f8ff;
            line-height: 1.6;
        }
        .quiz-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }
        .question-container {
            margin-bottom: 25px;
        }
        .structure-image {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }
        .structure-image img {
            max-width: 100%;
            height: auto;
            max-height: 250px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        .question-text {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .option {
            margin: 10px 0;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        .option:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        .selected {
            background: #fff3cd;
            border-color: #ffc107;
        }
        .correct {
            background: #d4edda !important;
            border-color: #28a745 !important;
            color: #155724;
        }
        .incorrect {
            background: #f8d7da !important;
            border-color: #dc3545 !important;
            color: #721c24;
        }
        .button {
            background: #3498db;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s ease;
        }
        .button:hover {
            background: #2980b9;
        }
        .button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
        }
        .button-restart {
            background: #2ecc71;
        }
        .button-restart:hover {
            background: #27ae60;
        }
        .results {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #2c3e50;
            margin: 20px 0;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 10px;
        }
        .progress-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background: #ecf0f1;
            border-radius: 10px;
            font-size: 16px;
        }
        .progress-bar {
            flex-grow: 1;
            height: 10px;
            background: #bdc3c7;
            border-radius: 5px;
            margin: 0 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: #3498db;
            width: 0%;
            transition: width 0.5s ease;
        }
        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }
        .explanation {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .score-display {
            font-size: 24px;
            color: #e74c3c;
            font-weight: bold;
        }
        .fun-fact {
            font-style: italic;
            color: #7f8c8d;
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #9b59b6;
        }
        .hidden {
            display: none !important;
        }
        .option-number {
            display: inline-block;
            width: 25px;
            height: 25px;
            background: #3498db;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 25px;
            margin-right: 10px;
            font-weight: bold;
        }
        #welcomeScreen, #quizScreen, #resultsScreen {
            display: block;
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <!-- Tela de Boas-vindas -->
        <div id="welcomeScreen">
            <h1>Quiz de Qu√≠mica Org√¢nica</h1>
            <p class="subtitle">Teste seus conhecimentos sobre fun√ß√µes org√¢nicas, nomenclatura e estrutura molecular</p>
            
            <div class="structure-image">
                <img src="imagens_quiz/composto1.png" alt="Exemplo de estrutura qu√≠mica" onerror="this.style.display='none'">
                <p><small>Exemplo de estrutura qu√≠mica que voc√™ encontrar√° no quiz</small></p>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <p>Este quiz cont√©m <span id="totalQuestions">5</span> quest√µes sobre:</p>
                <ul style="text-align: left; display: inline-block; margin: 15px 0;">
                    <li>Identifica√ß√£o de fun√ß√µes org√¢nicas</li>
                    <li>Contagem de carbonos na cadeia principal</li>
                    <li>Identifica√ß√£o de ramifica√ß√µes</li>
                    <li>Nomenclatura IUPAC</li>
                </ul>
                <br>
                <button class="button" onclick="startQuiz()">Iniciar Quiz</button>
            </div>
        </div>

        <!-- Tela do Quiz -->
        <div id="quizScreen" class="hidden">
            <div class="question-container">
                <div class="structure-image" id="structureContainer">
                    <!-- Imagem da estrutura ser√° inserida aqui -->
                </div>
                
                <div class="question-text" id="questionText"></div>
                
                <div id="optionsContainer"></div>
                
                <div id="feedback" class="feedback hidden"></div>
                <div id="explanation" class="explanation hidden"></div>
                <div id="funFact" class="fun-fact hidden"></div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="button" id="prevButton" onclick="prevQuestion()" disabled>Anterior</button>
                <button class="button" id="nextButton" onclick="nextQuestion()">Pr√≥xima</button>
                <button class="button" id="submitButton" onclick="submitQuiz()" style="display:none">Finalizar</button>
            </div>
            
            <div class="progress-container">
                <div>Progresso: <span id="progressText">1/5</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div>Pontua√ß√£o: <span class="score-display" id="score">0</span></div>
            </div>
        </div>

        <!-- Tela de Resultados -->
        <div id="resultsScreen" class="hidden">
            <h1>Resultado Final</h1>
            <div class="results" id="finalScore"></div>
            
            <div id="detailedResults" style="margin: 30px 0;">
                <!-- Resultados detalhados ser√£o inseridos aqui -->
            </div>
            
            <div style="text-align: center;">
                <button class="button button-restart" onclick="restartQuiz()">Refazer Quiz</button>
                <button class="button" onclick="showAnswers()">Ver Respostas</button>
            </div>
        </div>
    </div>

    <script>
        // Dados do quiz
        const perguntas = [
            {
                imagem: "imagens_quiz/composto1.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Apenas alcano", "√Ålcool e alcano", "Alde√≠do e alcano", "Cetona e alcano"],
                    respostaCorreta: 0,
                    explicacao: "O composto √© um alcano simples (Butano), contendo apenas liga√ß√µes simples entre carbonos."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["3 carbonos", "4 carbonos", "5 carbonos", "6 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 4 carbonos em sequ√™ncia linear."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "√â uma cadeia linear sem ramifica√ß√µes."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Metano", "Etano", "Propano", "Butano"],
                    respostaCorreta: 3,
                    explicacao: "O nome IUPAC √© Butano (4 carbonos na cadeia principal)."
                },
                curiosidade: "O butano √© usado como combust√≠vel em isqueiros e tamb√©m como g√°s de cozinha."
            },
            {
                imagem: "imagens_quiz/composto2.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Apenas alcano", "Alcano e √°lcool", "Alcano e cetona", "√Åcido carbox√≠lico"],
                    respostaCorreta: 0,
                    explicacao: "O composto √© um alcano ramificado (Isobutano/2-metilpropano)."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["2 carbonos", "3 carbonos", "4 carbonos", "5 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 3 carbonos, com um metil como ramifica√ß√£o."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 1,
                    explicacao: "Possui uma ramifica√ß√£o (grupo metil) no segundo carbono."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Propano", "Butano", "2-metilpropano", "2,2-dimetilpropano"],
                    respostaCorreta: 2,
                    explicacao: "O nome IUPAC √© 2-metilpropano (cadeia de 3 carbonos com metil no carbono 2)."
                },
                curiosidade: "O isobutano √© um is√¥mero do butano e √© usado como refrigerante e propelente."
            },
            {
                imagem: "imagens_quiz/composto3.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Alde√≠do", "Cetona", "√Ålcool", "√Åcido carbox√≠lico"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui o grupo funcional -CHO, caracter√≠stico dos alde√≠dos."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["1 carbono", "2 carbonos", "3 carbonos", "4 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 2 carbonos (incluindo o carbono do grupo alde√≠do)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "√â uma cadeia linear sem ramifica√ß√µes."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Metanal", "Etanal", "Propanal", "Butanal"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© Etanal (alde√≠do com 2 carbonos)."
                },
                curiosidade: "O etanal (acetalde√≠do) √© respons√°vel pelos sintomas da ressaca ap√≥s consumo de √°lcool."
            },
            {
                imagem: "imagens_quiz/composto4.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["√Åcido carbox√≠lico", "√âster", "√Ålcool", "Alde√≠do"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui o grupo funcional -COOH, caracter√≠stico dos √°cidos carbox√≠licos."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["2 carbonos", "3 carbonos", "4 carbonos", "5 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 3 carbonos (incluindo o carbono do grupo carbox√≠lico)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "√â uma cadeia linear sem ramifica√ß√µes."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["√Åcido etanoico", "√Åcido propanoico", "√Åcido butanoico", "√Åcido metanoico"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© √Åcido propanoico (√°cido carbox√≠lico com 3 carbonos)."
                },
                curiosidade: "O √°cido propanoico √© usado como conservante alimentar (E280) para inibir o crescimento de fungos."
            },
            {
                imagem: "imagens_quiz/composto5.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Cetona", "Alde√≠do", "√Ålcool", "√âter"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui o grupo funcional C=O no meio da cadeia, caracter√≠stico das cetonas."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["3 carbonos", "4 carbonos", "5 carbonos", "6 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 4 carbonos (a cetona est√° no carbono 2)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 1,
                    explicacao: "Possui uma ramifica√ß√£o (grupo metil) no carbono 3."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Butanona", "3-metilbutan-2-ona", "Pentan-2-ona", "2-metilbutan-3-ona"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© 3-metilbutan-2-ona (cetona na posi√ß√£o 2 de uma cadeia de 4 carbonos com metil na posi√ß√£o 3)."
                },
                curiosidade: "Esta cetona tem odor semelhante √† c√¢nfora e √© usada como solvente em alguns produtos industriais."
            },
            {
                imagem: "imagens_quiz/composto6.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["√âter", "√Ålcool", "Alde√≠do", "Cetona"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui um √°tomo de oxig√™nio ligado a dois radicais alquila, caracter√≠stico dos √©teres."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["1 carbono", "2 carbonos", "3 carbonos", "4 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 2 carbonos (ambos ligados ao oxig√™nio)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "N√£o h√° ramifica√ß√µes; √© um √©ter sim√©trico com dois grupos metila."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Metoxietano", "Etoxietano", "Metoximetano", "Met√≥xi-metano"],
                    respostaCorreta: 2,
                    explicacao: "O nome IUPAC √© metoximetano, mas tamb√©m √© conhecido como √©ter dimet√≠lico."
                },
                curiosidade: "O √©ter dimet√≠lico foi usado como anest√©sico no passado e hoje √© pesquisado como combust√≠vel alternativo."
            },
            {
                imagem: "imagens_quiz/composto7.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Hidrocarboneto arom√°tico", "Alcano", "Alqueno", "Alcino"],
                    respostaCorreta: 0,
                    explicacao: "O composto √© um hidrocarboneto arom√°tico, pois possui um anel benz√™nico com liga√ß√µes duplas conjugadas."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["4 carbonos", "5 carbonos", "6 carbonos", "7 carbonos"],
                    respostaCorreta: 2,
                    explicacao: "O benzeno possui 6 carbonos no anel arom√°tico."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "O benzeno n√£o possui ramifica√ß√µes; √© um anel fechado e sim√©trico."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Ciclohexano", "Benzeno", "Hexano", "Ciclohexeno"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© Benzeno, um hidrocarboneto arom√°tico fundamental."
                },
                curiosidade: "O benzeno √© um solvente industrial importante, mas √© cancer√≠geno e seu uso √© controlado."
            },
            {
                imagem: "imagens_quiz/composto8.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Apenas alcano", "Alcano e √°lcool", "Alcano e cetona", "Amina e alcano"],
                    respostaCorreta: 0,
                    explicacao: "O composto √© um alcano ramificado, sem grupos funcionais al√©m das liga√ß√µes simples."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["3 carbonos", "4 carbonos", "5 carbonos", "6 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 4 carbonos, com uma ramifica√ß√£o metil na posi√ß√£o 2."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 1,
                    explicacao: "Possui uma ramifica√ß√£o (grupo metil) no segundo carbono."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Butano", "2-metilbutano", "Pentano", "Isopentano"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© 2-metilbutano (cadeia de 4 carbonos com metil na posi√ß√£o 2)."
                },
                curiosidade: "O isopentano (2-metilbutano) √© um dos componentes da gasolina e tem alta volatilidade."
            },
            {
                imagem: "imagens_quiz/composto9.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["√âster", "√Åcido carbox√≠lico", "Alde√≠do", "Cetona"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui o grupo funcional -COO-, caracter√≠stico dos √©steres."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["2 carbonos", "3 carbonos", "4 carbonos", "5 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 3 carbonos (do grupo acetato)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "N√£o h√° ramifica√ß√µes na cadeia principal."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Acetato de etila", "Acetato de metila", "Propanoato de metila", "Metanoato de metila"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© acetato de metila (√©ster do √°cido ac√©tico com metanol)."
                },
                curiosidade: "O acetato de metila √© usado como solvente em vernizes e removedores de esmalte, e tem odor agrad√°vel de frutas."
            },
            {
                imagem: "imagens_quiz/composto10.png",
                pergunta: "Analise a estrutura qu√≠mica acima e responda:",
                funcoes: {
                    pergunta: "1. Quais s√£o as fun√ß√µes org√¢nicas presentes neste composto?",
                    opcoes: ["Amina", "√Ålcool", "Alde√≠do", "Cetona"],
                    respostaCorreta: 0,
                    explicacao: "O composto possui o grupo funcional -NH2, caracter√≠stico das aminas."
                },
                cadeiaPrincipal: {
                    pergunta: "2. Quantos carbonos possui a cadeia principal?",
                    opcoes: ["1 carbono", "2 carbonos", "3 carbonos", "4 carbonos"],
                    respostaCorreta: 1,
                    explicacao: "A cadeia principal possui 2 carbonos (grupo etil ligado √† amina)."
                },
                ramificacoes: {
                    pergunta: "3. Quantas ramifica√ß√µes possui esta cadeia carb√¥nica?",
                    opcoes: ["0 ramifica√ß√µes", "1 ramifica√ß√£o", "2 ramifica√ß√µes", "3 ramifica√ß√µes"],
                    respostaCorreta: 0,
                    explicacao: "N√£o h√° ramifica√ß√µes; √© uma amina prim√°ria de cadeia linear."
                },
                nomeIUPAC: {
                    pergunta: "4. Qual √© o nome IUPAC correto para este composto?",
                    opcoes: ["Metilamina", "Etilamina", "Propilamina", "Butilamina"],
                    respostaCorreta: 1,
                    explicacao: "O nome IUPAC √© etilamina (amina com dois carbonos)."
                },
                curiosidade: "A etilamina √© uma amina prim√°ria vol√°til e √© usada na produ√ß√£o de herbicidas e corantes."
            },

        ];

        // Vari√°veis de estado do quiz
        let perguntaAtual = 0;
        let subperguntaAtual = 0;
        let pontuacao = 0;
        let respostasUsuario = Array(perguntas.length).fill().map(() => Array(4).fill(null));
        let respostasCorretas = Array(perguntas.length).fill().map(() => Array(4).fill(false));
        let quizIniciado = false;

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('totalQuestions').textContent = perguntas.length * 4;
        });

        function startQuiz() {
            console.log("Quiz iniciado!");
            perguntaAtual = 0;
            subperguntaAtual = 0;
            pontuacao = 0;
            respostasUsuario = Array(perguntas.length).fill().map(() => Array(4).fill(null));
            respostasCorretas = Array(perguntas.length).fill().map(() => Array(4).fill(false));
            quizIniciado = true;
            
            document.getElementById("welcomeScreen").classList.add("hidden");
            document.getElementById("quizScreen").classList.remove("hidden");
            document.getElementById("resultsScreen").classList.add("hidden");
            
            mostrarPergunta();
        }

        function getSubperguntaAtual() {
            const pergunta = perguntas[perguntaAtual];
            switch(subperguntaAtual) {
                case 0: return pergunta.funcoes;
                case 1: return pergunta.cadeiaPrincipal;
                case 2: return pergunta.ramificacoes;
                case 3: return pergunta.nomeIUPAC;
                default: return pergunta.funcoes;
            }
        }

        function mostrarPergunta() {
            if (!quizIniciado) return;
            
            const pergunta = perguntas[perguntaAtual];
            const subpergunta = getSubperguntaAtual();
            
            // Atualizar imagem da estrutura
            document.getElementById("structureContainer").innerHTML = `
                <img src="${pergunta.imagem}" alt="Estrutura qu√≠mica" onerror="this.onerror=null; this.src='https://via.placeholder.com/400x300/cccccc/969696?text=Imagem+N√£o+Encontrada'">
                <p><small>Estrutura molecular do composto</small></p>
            `;
            
            // Atualizar texto da pergunta
            document.getElementById("questionText").innerHTML = `
                ${pergunta.pergunta}<br><br>
                <strong>${subpergunta.pergunta}</strong>
            `;
            
            // Atualizar op√ß√µes
            let html = "";
            for (let i = 0; i < subpergunta.opcoes.length; i++) {
                const letra = String.fromCharCode(65 + i);
                const selecionada = respostasUsuario[perguntaAtual][subperguntaAtual] === i;
                const classe = selecionada ? 'selected' : '';
                
                html += `
                    <div class="option ${classe}" onclick="selecionarResposta(${i})">
                        <span class="option-number">${letra}</span> ${subpergunta.opcoes[i]}
                    </div>
                `;
            }
            document.getElementById("optionsContainer").innerHTML = html;
            
            // Atualizar progresso
            const totalPerguntas = perguntas.length * 4;
            const perguntasRespondidas = contarPerguntasRespondidas();
            const progressoPercentual = (perguntasRespondidas / totalPerguntas) * 100;
            
            document.getElementById("progressText").textContent = 
                `${perguntaAtual * 4 + subperguntaAtual + 1}/${totalPerguntas}`;
            document.getElementById("progressFill").style.width = `${progressoPercentual}%`;
            document.getElementById("score").textContent = pontuacao;
            
            // Atualizar estado dos bot√µes
            document.getElementById("prevButton").disabled = (perguntaAtual === 0 && subperguntaAtual === 0);
            
            // Mostrar bot√£o de finalizar na √∫ltima subpergunta da √∫ltima pergunta
            if (perguntaAtual === perguntas.length - 1 && subperguntaAtual === 3) {
                document.getElementById("nextButton").style.display = 'none';
                document.getElementById("submitButton").style.display = 'inline-block';
            } else {
                document.getElementById("nextButton").style.display = 'inline-block';
                document.getElementById("submitButton").style.display = 'none';
            }
            
            // Esconder feedback
            document.getElementById("feedback").classList.add("hidden");
            document.getElementById("explanation").classList.add("hidden");
            document.getElementById("funFact").classList.add("hidden");
        }

        function selecionarResposta(indice) {
            const pergunta = perguntas[perguntaAtual];
            const subpergunta = getSubperguntaAtual();
            
            // Armazenar resposta do usu√°rio
            respostasUsuario[perguntaAtual][subperguntaAtual] = indice;
            
            // Verificar se est√° correta
            const correta = (indice === subpergunta.respostaCorreta);
            respostasCorretas[perguntaAtual][subperguntaAtual] = correta;
            
            // Atualizar pontua√ß√£o
            if (correta) {
                pontuacao++;
            }
            
            // Mostrar feedback
            const feedbackElement = document.getElementById("feedback");
            const explanationElement = document.getElementById("explanation");
            const funFactElement = document.getElementById("funFact");
            
            if (correta) {
                feedbackElement.textContent = "‚úì Resposta correta!";
                feedbackElement.style.backgroundColor = "#d4edda";
                feedbackElement.style.color = "#155724";
                feedbackElement.style.border = "1px solid #c3e6cb";
            } else {
                feedbackElement.textContent = "‚úó Resposta incorreta";
                feedbackElement.style.backgroundColor = "#f8d7da";
                feedbackElement.style.color = "#721c24";
                feedbackElement.style.border = "1px solid #f5c6cb";
            }
            
            explanationElement.textContent = subpergunta.explicacao;
            funFactElement.textContent = pergunta.curiosidade;
            
            feedbackElement.classList.remove("hidden");
            explanationElement.classList.remove("hidden");
            funFactElement.classList.remove("hidden");
            
            // Atualizar visual das op√ß√µes
            const options = document.getElementById("optionsContainer").getElementsByClassName("option");
            for (let i = 0; i < options.length; i++) {
                options[i].classList.remove('selected', 'correct', 'incorrect');
                
                if (i === indice) {
                    options[i].classList.add('selected');
                }
                
                if (i === subpergunta.respostaCorreta) {
                    options[i].classList.add('correct');
                } else if (i === indice && i !== subpergunta.respostaCorreta) {
                    options[i].classList.add('incorrect');
                }
            }
            
            // Atualizar pontua√ß√£o na tela
            document.getElementById("score").textContent = pontuacao;
        }

        function nextQuestion() {
            if (subperguntaAtual < 3) {
                subperguntaAtual++;
            } else if (perguntaAtual < perguntas.length - 1) {
                perguntaAtual++;
                subperguntaAtual = 0;
            }
            mostrarPergunta();
        }

        function prevQuestion() {
            if (subperguntaAtual > 0) {
                subperguntaAtual--;
            } else if (perguntaAtual > 0) {
                perguntaAtual--;
                subperguntaAtual = 3;
            }
            mostrarPergunta();
        }

        function submitQuiz() {
            document.getElementById("quizScreen").classList.add("hidden");
            document.getElementById("resultsScreen").classList.remove("hidden");
            
            const totalPerguntas = perguntas.length * 4;
            const percentual = (pontuacao / totalPerguntas) * 100;
            
            let mensagem, emoji;
            if (percentual === 100) {
                mensagem = "Excelente! Voc√™ √© um mestre da qu√≠mica org√¢nica! üß™";
                emoji = "üèÜ";
            } else if (percentual >= 80) {
                mensagem = "Muito bom! Voc√™ domina bem a qu√≠mica org√¢nica!";
                emoji = "‚≠ê";
            } else if (percentual >= 60) {
                mensagem = "Bom trabalho! Continue estudando para melhorar ainda mais!";
                emoji = "üëç";
            } else if (percentual >= 40) {
                mensagem = "Voc√™ tem uma base, mas precisa praticar mais!";
                emoji = "üìö";
            } else {
                mensagem = "N√£o desanime! Revise os conceitos b√°sicos e tente novamente!";
                emoji = "üí™";
            }
            
            document.getElementById("finalScore").innerHTML = `
                ${emoji}<br>
                ${mensagem}<br><br>
                <span style="font-size: 28px;">Voc√™ acertou ${pontuacao} de ${totalPerguntas} quest√µes</span><br>
                <span style="font-size: 20px; color: #3498db;">(${percentual.toFixed(1)}% de acerto)</span>
            `;
            
            mostrarResultadosDetalhados();
        }

        function mostrarResultadosDetalhados() {
            let html = "<h3>Desempenho por Quest√£o:</h3>";
            
            for (let i = 0; i < perguntas.length; i++) {
                const pergunta = perguntas[i];
                const acertos = respostasCorretas[i].filter(v => v).length;
                const totalSub = 4;
                
                html += `
                    <div style="margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <strong>Quest√£o ${i + 1}:</strong> ${acertos}/${totalSub} acertos
                        <div style="height: 8px; background: #e9ecef; border-radius: 4px; margin: 5px 0;">
                            <div style="height: 100%; width: ${(acertos/totalSub)*100}%; background: #${acertos === totalSub ? '2ecc71' : acertos >= 2 ? 'f39c12' : 'e74c3c'}; border-radius: 4px;"></div>
                        </div>
                    </div>
                `;
            }
            
            document.getElementById("detailedResults").innerHTML = html;
        }

        function showAnswers() {
            let html = "<h3>Respostas Corretas:</h3>";
            
            for (let i = 0; i < perguntas.length; i++) {
                const pergunta = perguntas[i];
                html += `
                    <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <strong>Quest√£o ${i + 1}:</strong><br>
                        <img src="${pergunta.imagem}" style="max-width: 200px; height: auto; margin: 10px 0;"><br>
                        1. ${pergunta.funcoes.opcoes[pergunta.funcoes.respostaCorreta]}<br>
                        2. ${pergunta.cadeiaPrincipal.opcoes[pergunta.cadeiaPrincipal.respostaCorreta]}<br>
                        3. ${pergunta.ramificacoes.opcoes[pergunta.ramificacoes.respostaCorreta]}<br>
                        4. ${pergunta.nomeIUPAC.opcoes[pergunta.nomeIUPAC.respostaCorreta]}
                    </div>
                `;
            }
            
            document.getElementById("detailedResults").innerHTML = html;
        }

        function restartQuiz() {
            perguntaAtual = 0;
            subperguntaAtual = 0;
            pontuacao = 0;
            respostasUsuario = Array(perguntas.length).fill().map(() => Array(4).fill(null));
            respostasCorretas = Array(perguntas.length).fill().map(() => Array(4).fill(false));
            quizIniciado = true;
            
            document.getElementById("resultsScreen").classList.add("hidden");
            document.getElementById("quizScreen").classList.remove("hidden");
            
            mostrarPergunta();
        }

        function contarPerguntasRespondidas() {
            let contador = 0;
            for (let i = 0; i < respostasUsuario.length; i++) {
                for (let j = 0; j < respostasUsuario[i].length; j++) {
                    if (respostasUsuario[i][j] !== null) {
                        contador++;
                    }
                }
            }
            return contador;
        }
    </script>
</body>
</html>